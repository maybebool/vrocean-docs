"use strict";(globalThis.webpackChunkvrocean_docs=globalThis.webpackChunkvrocean_docs||[]).push([[209],{4648(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"optimization/vr-performance","title":"VR Performance","description":"This guide covers optimization strategies for running VROcean on VR headsets, with specific focus on Meta Quest 3 standalone and PC VR platforms.","source":"@site/docs/optimization/vr-performance.md","sourceDirName":"optimization","slug":"/optimization/vr-performance","permalink":"/vrocean-docs/docs/optimization/vr-performance","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"VR Performance"},"sidebar":"tutorialSidebar","previous":{"title":"Reflection Probe","permalink":"/vrocean-docs/docs/components/reflection-probe"},"next":{"title":"Quality Presets","permalink":"/vrocean-docs/docs/optimization/quality-presets"}}');var s=r(4848),l=r(8453);const t={sidebar_position:1,title:"VR Performance"},d="VR Performance",c={},a=[{value:"Performance Targets",id:"performance-targets",level:2},{value:"Quick Settings Reference",id:"quick-settings-reference",level:2},{value:"Quest 3 Standalone (Recommended)",id:"quest-3-standalone-recommended",level:3},{value:"PC VR (Recommended)",id:"pc-vr-recommended",level:3},{value:"Simulation Optimization",id:"simulation-optimization",level:2},{value:"Resolution Selection",id:"resolution-selection",level:3},{value:"Wave Pattern Size",id:"wave-pattern-size",level:3},{value:"Rendering Optimization",id:"rendering-optimization",level:2},{value:"Quality Presets",id:"quality-presets",level:3},{value:"Ocean Size",id:"ocean-size",level:3},{value:"LOD Distance",id:"lod-distance",level:3},{value:"Shader Optimization",id:"shader-optimization",level:2},{value:"VR Mobile Mode",id:"vr-mobile-mode",level:3},{value:"Screen Effects",id:"screen-effects",level:3},{value:"Shader LOD",id:"shader-lod",level:3},{value:"Reflection Probe Optimization",id:"reflection-probe-optimization",level:2},{value:"Update Frequency",id:"update-frequency",level:3},{value:"Probe Resolution",id:"probe-resolution",level:3},{value:"Disable During Intensity",id:"disable-during-intensity",level:3},{value:"Buoyancy Optimization",id:"buoyancy-optimization",level:2},{value:"Component Selection",id:"component-selection",level:3},{value:"Sample Count",id:"sample-count",level:3},{value:"Object Pooling",id:"object-pooling",level:3},{value:"VR Comfort Optimization",id:"vr-comfort-optimization",level:2},{value:"Small Wave Suppression",id:"small-wave-suppression",level:3},{value:"Time Scale",id:"time-scale",level:3},{value:"Choppiness",id:"choppiness",level:3},{value:"Profiling",id:"profiling",level:2},{value:"Unity Profiler Markers",id:"unity-profiler-markers",level:3},{value:"Key Metrics to Watch",id:"key-metrics-to-watch",level:3},{value:"Performance Testing Checklist",id:"performance-testing-checklist",level:3},{value:"Platform-Specific Tips",id:"platform-specific-tips",level:2},{value:"Quest 3",id:"quest-3",level:3},{value:"Quest 2",id:"quest-2",level:3},{value:"PC VR (Mid-Range)",id:"pc-vr-mid-range",level:3},{value:"PC VR (High-End)",id:"pc-vr-high-end",level:3},{value:"Common Performance Issues",id:"common-performance-issues",level:2},{value:"High CPU Usage",id:"high-cpu-usage",level:3},{value:"High GPU Usage",id:"high-gpu-usage",level:3},{value:"Frame Spikes",id:"frame-spikes",level:3},{value:"Thermal Throttling",id:"thermal-throttling",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"vr-performance",children:"VR Performance"})}),"\n",(0,s.jsx)(n.p,{children:"This guide covers optimization strategies for running VROcean on VR headsets, with specific focus on Meta Quest 3 standalone and PC VR platforms."}),"\n",(0,s.jsx)(n.h2,{id:"performance-targets",children:"Performance Targets"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Platform"}),(0,s.jsx)(n.th,{children:"Target Frame Rate"}),(0,s.jsx)(n.th,{children:"Frame Budget"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Quest 3 (72 Hz)"}),(0,s.jsx)(n.td,{children:"72 fps"}),(0,s.jsx)(n.td,{children:"13.9 ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Quest 3 (90 Hz)"}),(0,s.jsx)(n.td,{children:"90 fps"}),(0,s.jsx)(n.td,{children:"11.1 ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Quest 3 (120 Hz)"}),(0,s.jsx)(n.td,{children:"120 fps"}),(0,s.jsx)(n.td,{children:"8.3 ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PC VR (90 Hz)"}),(0,s.jsx)(n.td,{children:"90 fps"}),(0,s.jsx)(n.td,{children:"11.1 ms"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"VROcean should consume no more than 30-40% of your frame budget to leave room for game logic, physics, and other rendering."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Platform"}),(0,s.jsx)(n.th,{children:"VROcean Budget"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Quest 3 (72 Hz)"}),(0,s.jsx)(n.td,{children:"4-5 ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Quest 3 (90 Hz)"}),(0,s.jsx)(n.td,{children:"3-4 ms"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PC VR"}),(0,s.jsx)(n.td,{children:"3-4 ms"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"quick-settings-reference",children:"Quick Settings Reference"}),"\n",(0,s.jsx)(n.h3,{id:"quest-3-standalone-recommended",children:"Quest 3 Standalone (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"OceanSimulator:\r\n  Resolution: 64x64\r\n\r\nSurfaceLodRenderer:\r\n  Quality: Low\r\n  Ocean Size: 512 - 1024\r\n\r\nOcean Material:\r\n  VR Mobile Mode: On\r\n  Use Screen Effects: Off\r\n  LOD Distance: 30\r\n  Detail Fade Distance: 15\r\n\r\nWaveConfig:\r\n  Small Wave Suppression: 0.3 - 0.4\r\n\r\nSceneSystem:\r\n  Reflection Update Interval: 15 - 30 seconds\r\n\r\nReflectionProbe:\r\n  Resolution: 64 - 128\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pc-vr-recommended",children:"PC VR (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"OceanSimulator:\r\n  Resolution: 128x128\r\n\r\nSurfaceLodRenderer:\r\n  Quality: Medium or High\r\n  Ocean Size: 1024 - 2048\r\n\r\nOcean Material:\r\n  VR Mobile Mode: Off\r\n  Use Screen Effects: Optional\r\n  LOD Distance: 50\r\n  Detail Fade Distance: 30\r\n\r\nWaveConfig:\r\n  Small Wave Suppression: 0.1 - 0.2\r\n\r\nSceneSystem:\r\n  Reflection Update Interval: 3 - 5 seconds\r\n\r\nReflectionProbe:\r\n  Resolution: 128 - 256\n"})}),"\n",(0,s.jsx)(n.h2,{id:"simulation-optimization",children:"Simulation Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"resolution-selection",children:"Resolution Selection"}),"\n",(0,s.jsx)(n.p,{children:"The FFT resolution has the largest impact on CPU performance."}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Resolution"}),(0,s.jsx)(n.th,{children:"CPU Time (Quest 3)"}),(0,s.jsx)(n.th,{children:"Visual Quality"}),(0,s.jsx)(n.th,{children:"Recommendation"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"64x64"}),(0,s.jsx)(n.td,{children:"~0.3 ms"}),(0,s.jsx)(n.td,{children:"Good"}),(0,s.jsx)(n.td,{children:"Quest standalone"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"128x128"}),(0,s.jsx)(n.td,{children:"~0.8 ms"}),(0,s.jsx)(n.td,{children:"High"}),(0,s.jsx)(n.td,{children:"Quest with headroom, PC VR"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"256x256"}),(0,s.jsx)(n.td,{children:"~2.5 ms"}),(0,s.jsx)(n.td,{children:"Very high"}),(0,s.jsx)(n.td,{children:"PC VR only"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"512x512"}),(0,s.jsx)(n.td,{children:"~8 ms"}),(0,s.jsx)(n.td,{children:"Maximum"}),(0,s.jsx)(n.td,{children:"Not recommended for VR"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Platform-specific resolution\r\n#if UNITY_ANDROID\r\n    simulator.Resolution = OceanResolution._64x64;\r\n#else\r\n    simulator.Resolution = OceanResolution._128x128;\r\n#endif\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wave-pattern-size",children:"Wave Pattern Size"}),"\n",(0,s.jsx)(n.p,{children:"Larger pattern sizes can hide low resolution:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Use larger pattern to mask low resolution detail\r\nwaveConfig.WavePatternSize = 96f; // Instead of 64\n"})}),"\n",(0,s.jsx)(n.p,{children:"This increases the world-space size of waves, making individual texels less noticeable."}),"\n",(0,s.jsx)(n.h2,{id:"rendering-optimization",children:"Rendering Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"quality-presets",children:"Quality Presets"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Preset"}),(0,s.jsx)(n.th,{children:"Vertices/Frame"}),(0,s.jsx)(n.th,{children:"GPU Impact"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Low"}),(0,s.jsx)(n.td,{children:"~8,000"}),(0,s.jsx)(n.td,{children:"Minimal"}),(0,s.jsx)(n.td,{children:"Quest standalone"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Medium"}),(0,s.jsx)(n.td,{children:"~30,000"}),(0,s.jsx)(n.td,{children:"Low"}),(0,s.jsx)(n.td,{children:"Quest with headroom"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"High"}),(0,s.jsx)(n.td,{children:"~120,000"}),(0,s.jsx)(n.td,{children:"Moderate"}),(0,s.jsx)(n.td,{children:"PC VR mid-range"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ultra"}),(0,s.jsx)(n.td,{children:"~200,000"}),(0,s.jsx)(n.td,{children:"High"}),(0,s.jsx)(n.td,{children:"PC VR high-end"})]})]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Dynamic quality based on performance\r\nvoid AdjustQuality()\r\n{\r\n    float fps = 1f / Time.smoothDeltaTime;\r\n    \r\n    if (fps < 68f) // Below Quest 72Hz target\r\n    {\r\n        renderer.Quality = QualityLevel.Low;\r\n    }\r\n    else if (fps > 85f)\r\n    {\r\n        renderer.Quality = QualityLevel.Medium;\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"ocean-size",children:"Ocean Size"}),"\n",(0,s.jsx)(n.p,{children:"Smaller ocean areas require fewer LOD levels:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Ocean Size"}),(0,s.jsx)(n.th,{children:"LOD Levels"}),(0,s.jsx)(n.th,{children:"Traversal Cost"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"256"}),(0,s.jsx)(n.td,{children:"2"}),(0,s.jsx)(n.td,{children:"Very low"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"512"}),(0,s.jsx)(n.td,{children:"3"}),(0,s.jsx)(n.td,{children:"Low"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"1024"}),(0,s.jsx)(n.td,{children:"4"}),(0,s.jsx)(n.td,{children:"Moderate"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"2048"}),(0,s.jsx)(n.td,{children:"5"}),(0,s.jsx)(n.td,{children:"Higher"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"4096+"}),(0,s.jsx)(n.td,{children:"6+"}),(0,s.jsx)(n.td,{children:"High"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"For confined VR experiences (boat deck, small island), use smaller ocean sizes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Small play area\r\nrenderer.OceanSize = 512f;\r\n\r\n// Open ocean exploration\r\nrenderer.OceanSize = 1024f;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"lod-distance",children:"LOD Distance"}),"\n",(0,s.jsx)(n.p,{children:"Reduce detail fade distance for faster LOD falloff:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Material property\r\nmaterial.SetFloat("_LODDistance", 30f);      // Default 50\r\nmaterial.SetFloat("_DetailFadeDistance", 15f); // Default 30\n'})}),"\n",(0,s.jsx)(n.h2,{id:"shader-optimization",children:"Shader Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"vr-mobile-mode",children:"VR Mobile Mode"}),"\n",(0,s.jsxs)(n.p,{children:["Enable ",(0,s.jsx)(n.code,{children:"VR_MOBILE_MODE"})," in the ocean material for significant GPU savings:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Features disabled by VR Mobile Mode:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Detail normal mapping"}),"\n",(0,s.jsx)(n.li,{children:"Subsurface scattering"}),"\n",(0,s.jsx)(n.li,{children:"Advanced reflections"}),"\n",(0,s.jsx)(n.li,{children:"Foam texture sampling"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Features retained:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"FFT displacement"}),"\n",(0,s.jsx)(n.li,{children:"Basic normals and lighting"}),"\n",(0,s.jsx)(n.li,{children:"Fresnel reflections"}),"\n",(0,s.jsx)(n.li,{children:"Foam (simplified)"}),"\n",(0,s.jsx)(n.li,{children:"Fog"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'// Enable via code (if material has the property)\r\nmaterial.EnableKeyword("VR_MOBILE_MODE");\n'})}),"\n",(0,s.jsx)(n.h3,{id:"screen-effects",children:"Screen Effects"}),"\n",(0,s.jsxs)(n.p,{children:["Disable ",(0,s.jsx)(n.code,{children:"Use Screen Effects"})," unless essential:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'material.DisableKeyword("USE_SCREEN_EFFECTS");\n'})}),"\n",(0,s.jsx)(n.p,{children:"Screen effects require:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Depth texture sampling"}),"\n",(0,s.jsx)(n.li,{children:"Opaque texture sampling"}),"\n",(0,s.jsx)(n.li,{children:"Additional shader complexity"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The visual benefit (depth-based color, refraction) is often not worth the cost in VR."}),"\n",(0,s.jsx)(n.h3,{id:"shader-lod",children:"Shader LOD"}),"\n",(0,s.jsx)(n.p,{children:"The ocean shader includes a fallback SubShader (LOD 50) for very low-end devices:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hlsl",children:"// Main SubShader - LOD 100\r\nSubShader\r\n{\r\n    LOD 100\r\n    // Full featured shader\r\n}\r\n\r\n// Fallback SubShader - LOD 50\r\nSubShader\r\n{\r\n    LOD 50\r\n    // Minimal shader: basic lighting + fresnel only\r\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Force the fallback via Quality Settings or Shader LOD API if needed."}),"\n",(0,s.jsx)(n.h2,{id:"reflection-probe-optimization",children:"Reflection Probe Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"update-frequency",children:"Update Frequency"}),"\n",(0,s.jsx)(n.p,{children:"Reflection probe updates are expensive. Reduce frequency for VR:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Quest standalone\r\nSceneSystem.Instance.SetReflectionUpdateInterval(20f);\r\n\r\n// PC VR\r\nSceneSystem.Instance.SetReflectionUpdateInterval(5f);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"probe-resolution",children:"Probe Resolution"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Resolution"}),(0,s.jsx)(n.th,{children:"Cost"}),(0,s.jsx)(n.th,{children:"Quality"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"64"}),(0,s.jsx)(n.td,{children:"Low"}),(0,s.jsx)(n.td,{children:"Acceptable for mobile VR"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"128"}),(0,s.jsx)(n.td,{children:"Moderate"}),(0,s.jsx)(n.td,{children:"Good balance"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"256"}),(0,s.jsx)(n.td,{children:"High"}),(0,s.jsx)(n.td,{children:"PC VR only"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"disable-during-intensity",children:"Disable During Intensity"}),"\n",(0,s.jsx)(n.p,{children:"Pause probe updates during performance-critical moments:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class PerformanceManager : MonoBehaviour\r\n{\r\n    public void OnIntenseGameplayStart()\r\n    {\r\n        SceneSystem.Instance.EnableProbeUpdates = false;\r\n    }\r\n\r\n    public void OnIntenseGameplayEnd()\r\n    {\r\n        SceneSystem.Instance.EnableProbeUpdates = true;\r\n        SceneSystem.Instance.ForceReflectionUpdateNextFrame();\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"buoyancy-optimization",children:"Buoyancy Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"component-selection",children:"Component Selection"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"CPU Cost"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"NonPhysicBasedObjectFloatation"}),(0,s.jsx)(n.td,{children:"Lowest"}),(0,s.jsx)(n.td,{children:"Visual-only objects"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"PhysicBasedObjectFloatation"}),(0,s.jsx)(n.td,{children:"Low"}),(0,s.jsx)(n.td,{children:"Few physics objects"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"ThreadedPhysicBasedObjectFloatation"}),(0,s.jsx)(n.td,{children:"Lowest per-object"}),(0,s.jsx)(n.td,{children:"Many physics objects"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"For Quest with multiple floating objects, always use the threaded variant:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// Prefer threaded for VR\r\ngameObject.AddComponent<ThreadedPhysicBasedObjectFloatation>();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"sample-count",children:"Sample Count"}),"\n",(0,s.jsx)(n.p,{children:"Reduce buoyancy sample resolution:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"// ThreadedPhysicBasedObjectFloatation\r\nfloatation.gridResolution = 0; // Minimum: (2*0+1)\xb2 = 1 sample\r\nfloatation.gridResolution = 1; // Default: (2*1+1)\xb2 = 9 samples\n"})}),"\n",(0,s.jsx)(n.p,{children:"For small objects, a single center sample is often sufficient."}),"\n",(0,s.jsx)(n.h3,{id:"object-pooling",children:"Object Pooling"}),"\n",(0,s.jsx)(n.p,{children:"Avoid instantiating/destroying floating objects at runtime:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"public class FloatingObjectPool : MonoBehaviour\r\n{\r\n    private Queue<GameObject> pool = new Queue<GameObject>();\r\n\r\n    public GameObject GetFloatingObject()\r\n    {\r\n        if (pool.Count > 0)\r\n        {\r\n            var obj = pool.Dequeue();\r\n            obj.SetActive(true);\r\n            return obj;\r\n        }\r\n        return CreateNewFloatingObject();\r\n    }\r\n\r\n    public void ReturnToPool(GameObject obj)\r\n    {\r\n        obj.SetActive(false);\r\n        pool.Enqueue(obj);\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"vr-comfort-optimization",children:"VR Comfort Optimization"}),"\n",(0,s.jsx)(n.p,{children:"Performance and comfort are related. Dropped frames cause discomfort."}),"\n",(0,s.jsx)(n.h3,{id:"small-wave-suppression",children:"Small Wave Suppression"}),"\n",(0,s.jsx)(n.p,{children:"Higher values reduce high-frequency detail that can cause eye strain:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"waveConfig.SmallWaveSuppression = 0.35f; // Comfortable for most users\n"})}),"\n",(0,s.jsx)(n.h3,{id:"time-scale",children:"Time Scale"}),"\n",(0,s.jsx)(n.p,{children:"Slower waves are more comfortable:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"waveConfig.TimeScale = 0.8f; // 80% speed\n"})}),"\n",(0,s.jsx)(n.h3,{id:"choppiness",children:"Choppiness"}),"\n",(0,s.jsx)(n.p,{children:"Reduce choppiness for calmer motion:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"waveConfig.Choppiness = 0.6f; // Less sharp peaks\n"})}),"\n",(0,s.jsx)(n.h2,{id:"profiling",children:"Profiling"}),"\n",(0,s.jsx)(n.h3,{id:"unity-profiler-markers",children:"Unity Profiler Markers"}),"\n",(0,s.jsx)(n.p,{children:"VROcean includes profiler markers:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Marker"}),(0,s.jsx)(n.th,{children:"Location"}),(0,s.jsx)(n.th,{children:"Measures"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"LOD Traversal"}),(0,s.jsx)(n.td,{children:"SurfaceLodRenderer"}),(0,s.jsx)(n.td,{children:"Quadtree traversal"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Patch Submission"}),(0,s.jsx)(n.td,{children:"SurfaceLodRenderer"}),(0,s.jsx)(n.td,{children:"Matrix building"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"(Job markers)"}),(0,s.jsx)(n.td,{children:"OceanSimulator"}),(0,s.jsx)(n.td,{children:"FFT job execution"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"key-metrics-to-watch",children:"Key Metrics to Watch"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Metric"}),(0,s.jsx)(n.th,{children:"Target (Quest 3)"}),(0,s.jsx)(n.th,{children:"Location"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Ocean jobs"}),(0,s.jsx)(n.td,{children:"< 1 ms"}),(0,s.jsx)(n.td,{children:"Profiler > Jobs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"LOD traversal"}),(0,s.jsx)(n.td,{children:"< 0.3 ms"}),(0,s.jsx)(n.td,{children:"Profiler > Scripts"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Draw calls"}),(0,s.jsx)(n.td,{children:"< 30"}),(0,s.jsx)(n.td,{children:"Frame Debugger"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Triangle count"}),(0,s.jsx)(n.td,{children:"< 50k"}),(0,s.jsx)(n.td,{children:"Frame Debugger"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"performance-testing-checklist",children:"Performance Testing Checklist"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Test on target hardware, not editor"}),"\n",(0,s.jsx)(n.li,{children:"Build with IL2CPP (not Mono)"}),"\n",(0,s.jsx)(n.li,{children:"Enable Burst compilation"}),"\n",(0,s.jsx)(n.li,{children:"Test at target frame rate (72/90/120 Hz)"}),"\n",(0,s.jsx)(n.li,{children:"Test with representative scene content"}),"\n",(0,s.jsx)(n.li,{children:"Monitor thermal throttling on Quest"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"platform-specific-tips",children:"Platform-Specific Tips"}),"\n",(0,s.jsx)(n.h3,{id:"quest-3",children:"Quest 3"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'void ConfigureForQuest()\r\n{\r\n    // Simulation\r\n    simulator.Resolution = OceanResolution._64x64;\r\n    \r\n    // Rendering\r\n    renderer.Quality = QualityLevel.Low;\r\n    renderer.OceanSize = 512f;\r\n    \r\n    // Material\r\n    oceanMaterial.EnableKeyword("VR_MOBILE_MODE");\r\n    oceanMaterial.DisableKeyword("USE_SCREEN_EFFECTS");\r\n    \r\n    // Reflections\r\n    SceneSystem.Instance.SetReflectionUpdateInterval(20f);\r\n    \r\n    // Comfort\r\n    profile.WaveConfig.SmallWaveSuppression = 0.35f;\r\n    profile.WaveConfig.TimeScale = 0.9f;\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"quest-2",children:"Quest 2"}),"\n",(0,s.jsx)(n.p,{children:"Quest 2 has less headroom than Quest 3:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"void ConfigureForQuest2()\r\n{\r\n    simulator.Resolution = OceanResolution._64x64;\r\n    renderer.Quality = QualityLevel.Low;\r\n    renderer.OceanSize = 256f; // Smaller than Quest 3\r\n    \r\n    // Consider disabling reflection updates entirely\r\n    SceneSystem.Instance.EnableProbeUpdates = false;\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pc-vr-mid-range",children:"PC VR (Mid-Range)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'void ConfigureForPCVR()\r\n{\r\n    simulator.Resolution = OceanResolution._128x128;\r\n    renderer.Quality = QualityLevel.Medium;\r\n    renderer.OceanSize = 1024f;\r\n    \r\n    // Can afford more features\r\n    oceanMaterial.DisableKeyword("VR_MOBILE_MODE");\r\n    \r\n    SceneSystem.Instance.SetReflectionUpdateInterval(5f);\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"pc-vr-high-end",children:"PC VR (High-End)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:'void ConfigureForHighEndPCVR()\r\n{\r\n    simulator.Resolution = OceanResolution._256x256;\r\n    renderer.Quality = QualityLevel.High;\r\n    renderer.OceanSize = 2048f;\r\n    \r\n    // Full features\r\n    oceanMaterial.DisableKeyword("VR_MOBILE_MODE");\r\n    oceanMaterial.EnableKeyword("USE_SCREEN_EFFECTS");\r\n    \r\n    SceneSystem.Instance.SetReflectionUpdateInterval(2f);\r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"common-performance-issues",children:"Common Performance Issues"}),"\n",(0,s.jsx)(n.h3,{id:"high-cpu-usage",children:"High CPU Usage"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom:"})," CPU frame time exceeds budget"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reduce simulation resolution"}),"\n",(0,s.jsx)(n.li,{children:"Reduce buoyancy sample counts"}),"\n",(0,s.jsx)(n.li,{children:"Use threaded buoyancy component"}),"\n",(0,s.jsx)(n.li,{children:"Reduce ocean size (fewer LOD levels)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"high-gpu-usage",children:"High GPU Usage"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom:"})," GPU frame time exceeds budget"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enable VR Mobile Mode"}),"\n",(0,s.jsx)(n.li,{children:"Disable screen effects"}),"\n",(0,s.jsx)(n.li,{children:"Reduce quality preset"}),"\n",(0,s.jsx)(n.li,{children:"Lower reflection probe resolution"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"frame-spikes",children:"Frame Spikes"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom:"})," Periodic hitches"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Avoid rapid profile/wind changes (spectrum regeneration)"}),"\n",(0,s.jsx)(n.li,{children:"Increase reflection update interval"}),"\n",(0,s.jsx)(n.li,{children:"Use time-sliced probe rendering"}),"\n",(0,s.jsx)(n.li,{children:"Pool floating objects"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"thermal-throttling",children:"Thermal Throttling"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Symptom:"})," Performance degrades over time on Quest"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reduce all quality settings"}),"\n",(0,s.jsx)(n.li,{children:"Add rest periods for the GPU"}),"\n",(0,s.jsx)(n.li,{children:"Lower target frame rate to 72 Hz"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"./quality-presets",children:"Quality Presets"})," - Detailed preset configuration"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"../configuration/wave-settings",children:"Wave Settings"})," - Comfort-focused configuration"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>d});var i=r(6540);const s={},l=i.createContext(s);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);