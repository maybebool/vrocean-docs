"use strict";(globalThis.webpackChunkvrocean_docs=globalThis.webpackChunkvrocean_docs||[]).push([[697],{1728(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"components/reflection-probe","title":"Reflection Probe","description":"The BakedReflectionProbe component manages reflection probe orientation correction for accurate water reflections. It works alongside Unity\'s standard ReflectionProbe to ensure reflections remain correct as the probe or scene moves.","source":"@site/docs/components/reflection-probe.md","sourceDirName":"components","slug":"/components/reflection-probe","permalink":"/vrocean-docs/docs/components/reflection-probe","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Reflection Probe"},"sidebar":"tutorialSidebar","previous":{"title":"Surface Renderer","permalink":"/vrocean-docs/docs/components/surface-renderer"},"next":{"title":"VR Performance","permalink":"/vrocean-docs/docs/optimization/vr-performance"}}');var t=i(4848),s=i(8453);const l={sidebar_position:4,title:"Reflection Probe"},o="Reflection Probe",c={},d=[{value:"The Problem",id:"the-problem",level:2},{value:"The Solution",id:"the-solution",level:2},{value:"Adding to Scene",id:"adding-to-scene",level:2},{value:"Inspector Fields",id:"inspector-fields",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Bake Time",id:"bake-time",level:3},{value:"Runtime",id:"runtime",level:3},{value:"Shader Application",id:"shader-application",level:3},{value:"Singleton Pattern",id:"singleton-pattern",level:2},{value:"Integration with SceneSystem",id:"integration-with-scenesystem",level:2},{value:"Automatic Updates",id:"automatic-updates",level:3},{value:"Moving the Probe",id:"moving-the-probe",level:3},{value:"Resetting Position",id:"resetting-position",level:3},{value:"Forcing Updates",id:"forcing-updates",level:3},{value:"Changing Update Frequency",id:"changing-update-frequency",level:3},{value:"Probe Configuration",id:"probe-configuration",level:2},{value:"Recommended Settings",id:"recommended-settings",level:3},{value:"Importance Setting",id:"importance-setting",level:3},{value:"Culling Mask",id:"culling-mask",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Update Frequency",id:"update-frequency",level:3},{value:"Time Slicing",id:"time-slicing",level:3},{value:"Resolution",id:"resolution",level:3},{value:"VR Considerations",id:"vr-considerations",level:2},{value:"Quest Standalone",id:"quest-standalone",level:3},{value:"PC VR",id:"pc-vr",level:3},{value:"Multiple Probes",id:"multiple-probes",level:2},{value:"Without BakedReflectionProbe",id:"without-bakedreflectionprobe",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Reflections Look Wrong",id:"reflections-look-wrong",level:3},{value:"Reflections Don&#39;t Update",id:"reflections-dont-update",level:3},{value:"Reflections Are Black",id:"reflections-are-black",level:3},{value:"Performance Spikes",id:"performance-spikes",level:3},{value:"Probe Following Issues",id:"probe-following-issues",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"reflection-probe",children:"Reflection Probe"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," component manages reflection probe orientation correction for accurate water reflections. It works alongside Unity's standard ",(0,t.jsx)(n.code,{children:"ReflectionProbe"})," to ensure reflections remain correct as the probe or scene moves."]}),"\n",(0,t.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,t.jsx)(n.p,{children:"Unity's reflection probes capture the environment as a cubemap from a fixed position and orientation. When the probe is baked, its orientation is stored. If the probe or camera moves after baking, reflections can appear incorrectly oriented."}),"\n",(0,t.jsx)(n.p,{children:"For ocean rendering, this manifests as:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sky reflections that don't match the actual sky"}),"\n",(0,t.jsx)(n.li,{children:"Rotated or skewed environment reflections"}),"\n",(0,t.jsx)(n.li,{children:"Inconsistent reflections when moving through the scene"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"the-solution",children:"The Solution"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," stores the probe's orientation at bake time and calculates a reorientation matrix each frame. This matrix is passed to the ocean shader to correct reflection sampling."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Corrected Reflection = ReorientationMatrix * Raw Reflection Direction\n"})}),"\n",(0,t.jsx)(n.h2,{id:"adding-to-scene",children:"Adding to Scene"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a GameObject for your reflection probe"}),"\n",(0,t.jsxs)(n.li,{children:["Add Unity's standard ",(0,t.jsx)(n.code,{children:"ReflectionProbe"})," component"]}),"\n",(0,t.jsxs)(n.li,{children:["Add the ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," component to the same GameObject"]}),"\n",(0,t.jsx)(n.li,{children:"Configure and bake the reflection probe"}),"\n",(0,t.jsxs)(n.li,{children:["Reference the probe in ",(0,t.jsx)(n.code,{children:"SceneSystem"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"inspector-fields",children:"Inspector Fields"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," component has no exposed inspector fields. It operates automatically based on the GameObject's transform."]}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsx)(n.h3,{id:"bake-time",children:"Bake Time"}),"\n",(0,t.jsx)(n.p,{children:"When the probe is baked (or when the scene loads), the component stores the current world transform:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public void StoreBakeOrientation()\r\n{\r\n    _storedBakeOrientation = transform.localToWorldMatrix;\r\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This is called automatically in ",(0,t.jsx)(n.code,{children:"Awake()"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"runtime",children:"Runtime"}),"\n",(0,t.jsx)(n.p,{children:"Each frame, the component calculates the difference between the stored orientation and current orientation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public Matrix4x4 CalculateReorientationMatrix()\r\n{\r\n    return transform.worldToLocalMatrix * _storedBakeOrientation;\r\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"This matrix transforms reflection vectors from the current orientation back to the baked orientation."}),"\n",(0,t.jsx)(n.h3,{id:"shader-application",children:"Shader Application"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SceneSystem"})," retrieves this matrix and sets it as a global shader property:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// In SceneSystem.Environment.cs\r\nMatrix4x4 reorientation = BakedReflectionProbe.ActiveProbe != null\r\n    ? BakedReflectionProbe.ActiveProbe.CalculateReorientationMatrix()\r\n    : Matrix4x4.identity;\r\n\r\ncommandBuffer.SetGlobalMatrix(ShaderPropertyIDs.Probe.Reorientation, reorientation);\n"})}),"\n",(0,t.jsx)(n.p,{children:"The ocean shader uses this to correct reflection sampling:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-hlsl",children:"// In ocean shader\r\nfloat3 reflectionVector = reflect(-viewDirWS, normalWS);\r\nreflectionVector = mul((float3x3)_ProbeReorientation, reflectionVector);\r\nhalf3 reflection = GlossyEnvironmentReflection(reflectionVector, ...);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"singleton-pattern",children:"Singleton Pattern"}),"\n",(0,t.jsxs)(n.p,{children:["Only one ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," should be active at a time. The component enforces this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'public static BakedReflectionProbe ActiveProbe { get; private set; }\r\n\r\nprivate void OnEnable()\r\n{\r\n    Debug.Assert(ActiveProbe == null, \r\n        "Two BakedReflectionProbe instances are active", this);\r\n    ActiveProbe = this;\r\n}\r\n\r\nprivate void OnDisable()\r\n{\r\n    if (ActiveProbe == this)\r\n        ActiveProbe = null;\r\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Access the active probe from anywhere:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"if (BakedReflectionProbe.ActiveProbe != null)\r\n{\r\n    Matrix4x4 correction = BakedReflectionProbe.ActiveProbe.CalculateReorientationMatrix();\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-scenesystem",children:"Integration with SceneSystem"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SceneSystem"})," manages reflection probe updates through several methods:"]}),"\n",(0,t.jsx)(n.h3,{id:"automatic-updates",children:"Automatic Updates"}),"\n",(0,t.jsxs)(n.p,{children:["The probe re-renders periodically based on ",(0,t.jsx)(n.code,{children:"Reflection Update Interval"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// SceneSystem inspector field\r\n[SerializeField] private float reflectionUpdateInterval = 5f;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"moving-the-probe",children:"Moving the Probe"}),"\n",(0,t.jsx)(n.p,{children:"Move the probe horizontally to follow the player:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Follow player position (maintains original Y height)\r\nSceneSystem.Instance.MoveProbePosition(playerTransform);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"resetting-position",children:"Resetting Position"}),"\n",(0,t.jsx)(n.p,{children:"Return the probe to its original position:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"SceneSystem.Instance.ResetProbePosition();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"forcing-updates",children:"Forcing Updates"}),"\n",(0,t.jsx)(n.p,{children:"Trigger an immediate probe render:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// After significant scene changes\r\nSceneSystem.Instance.ForceReflectionUpdateNextFrame();\n"})}),"\n",(0,t.jsx)(n.h3,{id:"changing-update-frequency",children:"Changing Update Frequency"}),"\n",(0,t.jsx)(n.p,{children:"Adjust the update interval at runtime:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// More frequent updates for dynamic scenes\r\nSceneSystem.Instance.SetReflectionUpdateInterval(2f);\r\n\r\n// Less frequent for static scenes\r\nSceneSystem.Instance.SetReflectionUpdateInterval(10f);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"probe-configuration",children:"Probe Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["Configure the Unity ",(0,t.jsx)(n.code,{children:"ReflectionProbe"})," component for ocean use:"]}),"\n",(0,t.jsx)(n.h3,{id:"recommended-settings",children:"Recommended Settings"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Setting"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Reason"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Type"}),(0,t.jsx)(n.td,{children:"Realtime"}),(0,t.jsx)(n.td,{children:"Allows runtime updates"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Refresh Mode"}),(0,t.jsx)(n.td,{children:"Via Scripting"}),(0,t.jsx)(n.td,{children:"SceneSystem controls updates"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Time Slicing"}),(0,t.jsx)(n.td,{children:"Individual Faces"}),(0,t.jsx)(n.td,{children:"Spreads cost over frames"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Resolution"}),(0,t.jsx)(n.td,{children:"128 or 256"}),(0,t.jsx)(n.td,{children:"Balance quality/performance"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"HDR"}),(0,t.jsx)(n.td,{children:"On"}),(0,t.jsx)(n.td,{children:"Better sky and sun capture"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Box Projection"}),(0,t.jsx)(n.td,{children:"Off"}),(0,t.jsx)(n.td,{children:"Ocean is effectively infinite"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Blend Distance"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"Single probe, no blending"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"importance-setting",children:"Importance Setting"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Setting"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Reason"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Importance"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"Default priority"})]})})]}),"\n",(0,t.jsx)(n.h3,{id:"culling-mask",children:"Culling Mask"}),"\n",(0,t.jsx)(n.p,{children:"Include layers that should appear in reflections:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Sky"}),"\n",(0,t.jsx)(n.li,{children:"Terrain"}),"\n",(0,t.jsx)(n.li,{children:"Large static objects"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Exclude:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"UI"}),"\n",(0,t.jsx)(n.li,{children:"Small dynamic objects"}),"\n",(0,t.jsx)(n.li,{children:"Particles"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"update-frequency",children:"Update Frequency"}),"\n",(0,t.jsx)(n.p,{children:"Reflection probe rendering is expensive. Balance quality and performance:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Interval"}),(0,t.jsx)(n.th,{children:"Updates/Minute"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"1 second"}),(0,t.jsx)(n.td,{children:"60"}),(0,t.jsx)(n.td,{children:"Dynamic scenes, high-end PC"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"5 seconds"}),(0,t.jsx)(n.td,{children:"12"}),(0,t.jsx)(n.td,{children:"Default, balanced"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"10 seconds"}),(0,t.jsx)(n.td,{children:"6"}),(0,t.jsx)(n.td,{children:"Static scenes, mobile VR"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"30 seconds"}),(0,t.jsx)(n.td,{children:"2"}),(0,t.jsx)(n.td,{children:"Nearly static, Quest standalone"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"time-slicing",children:"Time Slicing"}),"\n",(0,t.jsx)(n.p,{children:"The probe uses time slicing to spread render cost:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Mode"}),(0,t.jsx)(n.th,{children:"Behavior"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"All Faces At Once"}),(0,t.jsx)(n.td,{children:"Renders all 6 faces immediately (hitchy)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Individual Faces"}),(0,t.jsx)(n.td,{children:"Renders 1 face per frame (smooth)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"No Time Slicing"}),(0,t.jsx)(n.td,{children:"Same as All Faces At Once"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"SceneSystem"})," uses ",(0,t.jsx)(n.code,{children:"Individual Faces"})," by default and switches to ",(0,t.jsx)(n.code,{children:"No Time Slicing"})," when forced updates are requested."]}),"\n",(0,t.jsx)(n.h3,{id:"resolution",children:"Resolution"}),"\n",(0,t.jsx)(n.p,{children:"Lower resolutions significantly improve performance:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Resolution"}),(0,t.jsx)(n.th,{children:"Texels"}),(0,t.jsx)(n.th,{children:"Relative Cost"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"64"}),(0,t.jsx)(n.td,{children:"24,576"}),(0,t.jsx)(n.td,{children:"1x"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"128"}),(0,t.jsx)(n.td,{children:"98,304"}),(0,t.jsx)(n.td,{children:"4x"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"256"}),(0,t.jsx)(n.td,{children:"393,216"}),(0,t.jsx)(n.td,{children:"16x"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"512"}),(0,t.jsx)(n.td,{children:"1,572,864"}),(0,t.jsx)(n.td,{children:"64x"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"For VR, 128 is usually sufficient. The ocean shader's smoothness-based blur hides low resolution."}),"\n",(0,t.jsx)(n.h2,{id:"vr-considerations",children:"VR Considerations"}),"\n",(0,t.jsx)(n.h3,{id:"quest-standalone",children:"Quest Standalone"}),"\n",(0,t.jsx)(n.p,{children:"For Quest standalone builds:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// Reduce update frequency\r\nSceneSystem.Instance.SetReflectionUpdateInterval(15f);\r\n\r\n// Use low resolution (set in inspector)\r\n// ReflectionProbe.resolution = 64 or 128\r\n\r\n// Disable during intensive moments\r\nSceneSystem.Instance.EnableProbeUpdates = false;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"pc-vr",children:"PC VR"}),"\n",(0,t.jsx)(n.p,{children:"For PC VR with more headroom:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"// More frequent updates\r\nSceneSystem.Instance.SetReflectionUpdateInterval(3f);\r\n\r\n// Higher resolution acceptable\r\n// ReflectionProbe.resolution = 256\n"})}),"\n",(0,t.jsx)(n.h2,{id:"multiple-probes",children:"Multiple Probes"}),"\n",(0,t.jsxs)(n.p,{children:["While ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," enforces a single active instance, you can switch between probes:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"public class ProbeManager : MonoBehaviour\r\n{\r\n    [SerializeField] private BakedReflectionProbe[] probes;\r\n\r\n    public void ActivateProbe(int index)\r\n    {\r\n        // Disable all\r\n        foreach (var probe in probes)\r\n        {\r\n            probe.gameObject.SetActive(false);\r\n        }\r\n\r\n        // Enable selected\r\n        probes[index].gameObject.SetActive(true);\r\n    }\r\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Use cases:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Different probes for different scene areas"}),"\n",(0,t.jsx)(n.li,{children:"Indoor vs outdoor probes"}),"\n",(0,t.jsx)(n.li,{children:"Quality level switching"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"without-bakedreflectionprobe",children:"Without BakedReflectionProbe"}),"\n",(0,t.jsx)(n.p,{children:"If you don't need orientation correction (probe never moves after baking):"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Skip adding ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"SceneSystem"})," will use ",(0,t.jsx)(n.code,{children:"Matrix4x4.identity"})," for reorientation"]}),"\n",(0,t.jsx)(n.li,{children:"Reflections work normally if probe orientation matches scene"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"However, for moving cameras or dynamic scenes, the component is recommended."}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"reflections-look-wrong",children:"Reflections Look Wrong"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Verify ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," is on the same GameObject as ",(0,t.jsx)(n.code,{children:"ReflectionProbe"})]}),"\n",(0,t.jsxs)(n.li,{children:["Check that only one ",(0,t.jsx)(n.code,{children:"BakedReflectionProbe"})," is active"]}),"\n",(0,t.jsx)(n.li,{children:"Ensure the probe was baked after adding the component"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"reflections-dont-update",children:"Reflections Don't Update"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Check ",(0,t.jsx)(n.code,{children:"Enable Reflection Updates"})," in SceneSystem"]}),"\n",(0,t.jsxs)(n.li,{children:["Verify ",(0,t.jsx)(n.code,{children:"EnableProbeUpdates"})," property is true"]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the scene is in Play Mode"}),"\n",(0,t.jsx)(n.li,{children:"Check the update interval isn't too long"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"reflections-are-black",children:"Reflections Are Black"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ensure the ",(0,t.jsx)(n.code,{children:"ReflectionProbe"})," has been baked at least once"]}),"\n",(0,t.jsx)(n.li,{children:"Check culling mask includes skybox"}),"\n",(0,t.jsx)(n.li,{children:"Verify HDR is enabled if using HDR rendering"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-spikes",children:"Performance Spikes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Increase update interval"}),"\n",(0,t.jsx)(n.li,{children:"Reduce probe resolution"}),"\n",(0,t.jsx)(n.li,{children:"Ensure time slicing is set to Individual Faces"}),"\n",(0,t.jsx)(n.li,{children:"Disable updates during intensive gameplay"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"probe-following-issues",children:"Probe Following Issues"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"MoveProbePosition"})," only changes X and Z, not Y"]}),"\n",(0,t.jsxs)(n.li,{children:["Original Y position is restored by ",(0,t.jsx)(n.code,{children:"ResetProbePosition"})]}),"\n",(0,t.jsx)(n.li,{children:"Check that the target transform is valid"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../configuration/visual-tuning",children:"Visual Tuning"})," - Reflection shader settings"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../optimization/vr-performance",children:"VR Performance"})," - Optimization strategies"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var r=i(6540);const t={},s=r.createContext(t);function l(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);